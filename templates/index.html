<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Conversor de Video</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <main class="container">
      <h1>Conversor de Video</h1>
      <p>
        Arrastra y suelta un video o haz clic para seleccionarlo. Luego elige el
        formato de salida.
      </p>

      <form
        id="convert-form"
        action="/convert"
        method="POST"
        enctype="multipart/form-data"
      >
        <div id="dropzone" class="dropzone">
          <input
            id="file-input"
            type="file"
            name="file"
            accept="video/*"
            required
            hidden
          />
          <div id="dz-instructions">
            <strong>Arrastra tu video aquí</strong> o
            <button type="button" id="browse-btn">Examinar</button>
            <div id="filename" class="filename"></div>
          </div>
        </div>

        <label for="format">Formato de salida</label>
        <select id="format" name="format" required>
          <option value="mp4">MP4 (H.264)</option>
          <option value="webm">WEBM (VP9/AV1)</option>
          <option value="avi">AVI (MPEG-4)</option>
          <option value="mkv">MKV (H.264/HEVC)</option>
          <option value="mp3">MP3 (Audio solamente)</option>
          <option value="srt">SRT (Subtítulos con IA)</option>
        </select>

        <label class="gpu-row">
          <input type="checkbox" id="gpu" name="gpu" checked />
          <span>Usar GPU (NVENC/AV1) — recomendado con RTX 40xx</span>
        </label>

        <!-- Opciones para Subtítulos -->
        <div id="srt-options" class="srt-options hidden">
          <label for="whisper-model"
            >Modelo Whisper (precisión vs velocidad)</label
          >
          <select id="whisper-model" name="whisper_model">
            <option value="tiny">Tiny (más rápido, menos preciso)</option>
            <option value="base" selected>Base (balance)</option>
            <option value="small">Small (más preciso)</option>
            <option value="medium">Medium (muy preciso)</option>
            <option value="large">Large (máxima precisión)</option>
          </select>

          <label for="translate-language">Traducir subtítulos (opcional)</label>
          <select id="translate-language" name="translate_language">
            <option value="">Sin traducción (solo idioma original)</option>
            <option value="english">Inglés</option>
            <option value="spanish">Español</option>
            <option value="french">Francés</option>
            <option value="german">Alemán</option>
            <option value="portuguese">Portugués</option>
            <option value="italian">Italiano</option>
            <option value="chinese">Chino</option>
            <option value="japanese">Japonés</option>
            <option value="korean">Coreano</option>
            <option value="russian">Ruso</option>
            <option value="arabic">Árabe</option>
            <option value="hindi">Hindi</option>
          </select>
          <small class="help-text"
            >Si seleccionas traducción, obtendrás 2 archivos SRT: original +
            traducido</small
          >
        </div>

        <button class="btn" type="submit">Convertir</button>
      </form>

      <section id="progress-area" class="hidden">
        <div class="bar-wrap">
          <div id="bar" class="bar" style="width: 0%"></div>
        </div>
        <div class="bar-text"><span id="bar-pct">0%</span></div>
        <details open class="logs">
          <summary>Logs</summary>
          <pre id="logs"></pre>
        </details>
        <a id="download-link" class="hidden btn" href="#"
          >Descargar convertido</a
        >
      </section>

      <footer>
        <small
          >Necesitas tener <code>ffmpeg</code> instalado y disponible en el PATH
          del sistema.</small
        >
      </footer>
    </main>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
